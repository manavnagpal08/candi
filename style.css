/* style.css - The "Hyper-Immersive & Artistic" Edition */

/* --- Google Fonts Import --- */
@import url('https://fonts.googleapis.com/css2?family=Spline+Sans:wght@300;400;500;600;700&family=Playfair+Display:wght@400;600;700&display=swap');

/* --- Root Variables (Light and Dark Mode) --- */
:root {
    /* Base Colors - Light Mode (Soft & inviting) */
    --color-bg-primary-light: #eff3f6; /* Very subtle light blue-grey */
    --color-bg-secondary-light: #ffffff; /* Pure white for main elements */
    --color-text-primary-light: #2c3e50; /* Deep charcoal */
    --color-text-secondary-light: #7f8c8d; /* Muted grey */
    --color-border-light: #e0e6ed; /* Soft, almost invisible border */

    /* Accent Color (Consistent for both modes - Sophisticated Blue/Purple) */
    --color-accent-main: #6F42C1; /* A rich, deep purple */
    --color-accent-dark: #5A359A; /* Darker accent */
    --color-accent-light: #8E6FCF; /* Lighter accent */
    --color-accent-gradient-start: #7B68EE; /* MediumSlateBlue */
    --color-accent-gradient-end: #6A5ACD; /* SlateBlue */
    --color-accent-fade: rgba(111, 66, 193, 0.1);

    /* Glassmorphism Effect - Light Mode */
    --glass-bg-light: rgba(255, 255, 255, 0.6);
    --glass-border-light: rgba(255, 255, 255, 0.3);
    --glass-shadow-light: rgba(0, 0, 0, 0.08);

    /* Shadows - Ultra refined, subtle layers */
    --shadow-deep-1: 0 4px 12px rgba(0,0,0,0.08), 0 2px 4px rgba(0,0,0,0.05);
    --shadow-deep-2: 0 12px 24px rgba(0,0,0,0.15), 0 6px 12px rgba(0,0,0,0.08);
    --shadow-inset-light: inset 0 1px 4px rgba(0,0,0,0.05), inset 0 0 2px rgba(0,0,0,0.02);

    /* Animation Variables */
    --transition-duration: 0.6s;
    --transition-ease: cubic-bezier(0.4, 0, 0.2, 1); /* Material Design standard ease */
    --glass-blur: 25px; /* More significant blur */
}

body.dark-mode {
    /* Base Colors - Dark Mode (Deep & mysterious) */
    --color-bg-primary-dark: #12121e; /* Very dark blue-purple */
    --color-bg-secondary-dark: #1e1e2d; /* Slightly lighter for cards */
    --color-text-primary-dark: #e0e0e0; /* Off-white */
    --color-text-secondary-dark: #a0a0a0; /* Muted light grey */
    --color-border-dark: #3a3a4a; /* Darker border */

    /* Accent remains the same for vibrancy */

    /* Glassmorphism Effect - Dark Mode */
    --glass-bg-dark: rgba(30, 30, 45, 0.6);
    --glass-border-dark: rgba(60, 60, 90, 0.3);
    --glass-shadow-dark: rgba(0, 0, 0, 0.4);

    /* Shadows - More subtle, but still present */
    --shadow-deep-1: 0 4px 12px rgba(0,0,0,0.25), 0 2px 4px rgba(0,0,0,0.15);
    --shadow-deep-2: 0 12px 24px rgba(0,0,0,0.4), 0 6px 12px rgba(0,0,0,0.25);
    --shadow-inset-dark: inset 0 1px 4px rgba(0,0,0,0.25), inset 0 0 2px rgba(0,0,0,0.1);
}

/* --- Global Base Styles --- */
html, body, .stApp {
    font-family: 'Spline Sans', sans-serif; /* Soft, modern sans-serif for body */
    background: var(--color-bg-primary-light);
    color: var(--color-text-primary-light);
    transition: background var(--transition-duration) var(--transition-ease),
                color var(--transition-duration) var(--transition-ease);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    overflow-x: hidden; /* Prevent horizontal scroll from animations */
}

/* Dynamic Background Layers (More complex animation) */
body::before, body::after {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -2;
    pointer-events: none;
    will-change: transform, opacity;
}

body::before { /* Base subtle texture */
    background: radial-gradient(circle at 10% 20%, rgba(120,100,200,0.05), transparent 40%),
                radial-gradient(circle at 90% 80%, rgba(100,180,220,0.05), transparent 40%);
    background-size: 200% 200%;
    animation: backgroundPan 30s linear infinite alternate;
}

body::after { /* Second, more dynamic layer with accent color */
    background: linear-gradient(135deg, var(--color-accent-fade) 0%, transparent 50%, var(--color-accent-fade) 100%);
    background-size: 300% 300%;
    opacity: 0.3;
    animation: backgroundPulse 25s linear infinite alternate, backgroundPan 40s linear infinite reverse;
}

@keyframes backgroundPan {
    0% { background-position: 0% 0%; }
    100% { background-position: 100% 100%; }
}

@keyframes backgroundPulse {
    0% { opacity: 0.3; }
    50% { opacity: 0.5; }
    100% { opacity: 0.3; }
}

body.dark-mode {
    background: var(--color-bg-primary-dark);
    color: var(--color-text-primary-dark);
}
body.dark-mode::before {
    background: radial-gradient(circle at 10% 20%, rgba(80,60,150,0.08), transparent 40%),
                radial-gradient(circle at 90% 80%, rgba(60,120,180,0.08), transparent 40%);
}
body.dark-mode::after {
    background: linear-gradient(135deg, rgba(111, 66, 193, 0.08) 0%, transparent 50%, rgba(111, 66, 193, 0.08) 100%);
}


/* Custom Scrollbar */
::-webkit-scrollbar {
    width: 14px;
    height: 14px;
}
::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.05);
    border-radius: 7px;
    border: 1px solid rgba(0,0,0,0.02);
}
::-webkit-scrollbar-thumb {
    background: linear-gradient(45deg, var(--color-accent-main), var(--color-accent-light));
    border-radius: 7px;
    border: 4px solid transparent; /* More pronounced gap */
    background-clip: content-box;
    transition: background var(--transition-duration) var(--transition-ease);
}
::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(45deg, var(--color-accent-dark), var(--color-accent-main));
}
body.dark-mode ::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255,255,255,0.02);
}

/* Selection Color */
::selection {
    background: var(--color-accent-main);
    color: white;
}

/* --- Typography --- */
h1, h2, h3, h4, h5, h6 {
    font-family: 'Playfair Display', serif; /* Elegant serif for headings */
    color: var(--color-accent-main);
    margin-top: 2.2em;
    margin-bottom: 1.2em;
    font-weight: 700;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.1), 2px 2px 5px rgba(0,0,0,0.05); /* Subtle depth */
    transition: color var(--transition-duration) var(--transition-ease);
}
body.dark-mode h1, body.dark-mode h2, body.dark-mode h3, body.dark-mode h4, body.dark-mode h5, body.dark-mode h6 {
    text-shadow: 1px 1px 2px rgba(0,0,0,0.3), 2px 2px 5px rgba(0,0,0,0.15);
}

h1 { font-size: 3.5em; line-height: 1.2; letter-spacing: -0.03em; }
h2 { font-size: 2.8em; font-weight: 600; }
h3 { font-size: 2.2em; font-weight: 600; }
p { line-height: 1.9; color: var(--color-text-secondary-light); }
body.dark-mode p { color: var(--color-text-secondary-dark); }
a { color: var(--color-accent-main); text-decoration: none; transition: all var(--transition-duration) var(--transition-ease); }
a:hover { color: var(--color-accent-dark); text-decoration: underline; transform: translateY(-2px) scale(1.01); filter: brightness(1.1); }

/* --- Sidebar Styling (Enhanced Glassmorphism) --- */
.stSidebar {
    background: var(--glass-bg-light);
    backdrop-filter: blur(var(--glass-blur));
    -webkit-backdrop-filter: blur(var(--glass-blur));
    border-right: 1px solid var(--glass-border-light);
    box-shadow: var(--shadow-deep-2); /* Very prominent shadow */
    padding-top: 3.5rem;
    color: var(--color-text-primary-light);
    transition: all var(--transition-duration) var(--transition-ease);
    position: relative;
    overflow: hidden; /* For inner glass effect */
}

body.dark-mode .stSidebar {
    background: var(--glass-bg-dark);
    border-right: 1px solid var(--glass-border-dark);
    box-shadow: var(--shadow-deep-2);
    color: var(--color-text-primary-dark);
}

.stSidebar::before { /* Inner subtle glass layer */
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(180deg, rgba(255,255,255,0.05), transparent 50%, rgba(255,255,255,0.02));
    pointer-events: none;
    z-index: -1;
}
body.dark-mode .stSidebar::before {
    background: linear-gradient(180deg, rgba(0,0,0,0.05), transparent 50%, rgba(0,0,0,0.02));
}

.stSidebar .stButton > button {
    width: calc(100% - 3rem); /* Adjusted for more padding */
    margin: 0.8rem 1.5rem;
    background: transparent;
    color: var(--color-text-primary-light);
    border: none;
    box-shadow: none;
    transition: all var(--transition-duration) var(--transition-ease);
    font-weight: 500;
    padding: 1.2rem 1.8rem;
    border-radius: 1.25rem; /* More rounded */
    text-align: left;
    display: flex;
    align-items: center;
    gap: 1.2rem;
    position: relative;
    overflow: hidden;
    z-index: 1; /* Ensure text is above ::before */
    transform: translateZ(0); /* Force hardware acceleration */
}

body.dark-mode .stSidebar .stButton > button {
    color: var(--color-text-primary-dark);
}

.stSidebar .stButton > button::before { /* Hover shimmer/flow effect */
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, var(--color-accent-fade), transparent);
    transition: transform var(--transition-duration) var(--transition-ease);
    z-index: -1;
}

.stSidebar .stButton > button:hover::before {
    transform: translateX(100%);
}

.stSidebar .stButton > button:hover {
    color: var(--color-accent-main);
    transform: translateY(-5px) scale(1.02); /* More lift and scale */
    box-shadow: var(--shadow-deep-1);
    background: var(--color-accent-fade);
    filter: brightness(1.1);
}
body.dark-mode .stSidebar .stButton > button:hover {
    color: var(--color-accent-light);
    box-shadow: var(--shadow-deep-1);
    background: rgba(111, 66, 193, 0.15); /* Slightly stronger for dark mode */
}


/* Custom HR Portal Button in sidebar */
.stSidebar a > button {
    background: linear-gradient(45deg, #28a745, #218838) !important; /* Green gradient */
    color: white !important;
    border: none !important;
    border-radius: 1.25rem !important; /* Consistent with other buttons */
    padding: 1.2rem 2rem !important;
    font-weight: 700 !important;
    width: calc(100% - 3rem) !important;
    margin: 1.8rem 1.5rem !important;
    cursor: pointer !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 15px !important;
    box-shadow: var(--shadow-deep-2) !important;
    transition: all var(--transition-duration) var(--transition-ease) !important;
    overflow: hidden;
    position: relative;
    z-index: 1;
    transform: translateZ(0); /* Hardware acceleration */
}

.stSidebar a > button::before { /* Circular glow on hover */
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    background: radial-gradient(circle, rgba(255, 255, 255, 0.3) 0%, transparent 70%);
    border-radius: 50%;
    transition: width 0.6s ease-out, height 0.6s ease-out, top 0.6s ease-out, left 0.6s ease-out;
    transform: translate(-50%, -50%);
    z-index: -1;
}

.stSidebar a > button:hover::before {
    width: 400%;
    height: 400%;
}

.stSidebar a > button:hover {
    background: linear-gradient(45deg, #218838, #1e7e34) !important;
    transform: translateY(-8px) scale(1.05) !important;
    box-shadow: var(--shadow-deep-2) !important; /* Still strong shadow */
    filter: brightness(1.05); /* Slight brightening */
}
body.dark-mode .stSidebar a > button {
    box-shadow: var(--shadow-deep-2) !important;
}

/* --- Main Content Styling --- */
.main .block-container {
    padding-top: 2.5rem;
    padding-bottom: 3.5rem;
    padding-left: 6rem; /* Even more generous side padding */
    padding-right: 6rem;
    opacity: 0;
    transform: translateY(60px); /* Deeper slide-up for entrance */
    animation: fadeInSlideUp var(--transition-duration) 0.3s var(--transition-ease) forwards;
}

/* Keyframe for page fade-in and slide-up */
@keyframes fadeInSlideUp {
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Inputs (text_input, text_area, selectbox, multiselect, slider) */
.stTextInput > div > div > input,
.stTextArea > div > div > textarea,
.stSelectbox > div > div > div > div > span,
.stMultiSelect > div > div > div > div > span,
.stSlider > div > div > div > div > div {
    background-color: var(--color-bg-secondary-light) !important;
    color: var(--color-text-primary-light) !important;
    border: 1px solid var(--color-border-light) !important;
    border-radius: 0.8rem;
    padding: 1rem 1.6rem;
    box-shadow: var(--shadow-inset-light);
    transition: all var(--transition-duration) var(--transition-ease);
}

body.dark-mode .stTextInput > div > div > input,
body.dark-mode .stTextArea > div > div > textarea,
body.dark-mode .stSelectbox > div > div > div > div > span,
body.dark-mode .stMultiSelect > div > div > div > div > span,
body.dark-mode .stSlider > div > div > div > div > div {
    background-color: var(--color-bg-secondary-dark) !important;
    color: var(--color-text-primary-dark) !important;
    border: 1px solid var(--color-border-dark) !important;
    box-shadow: var(--shadow-inset-dark);
}

.stTextInput > div > div > input:focus,
.stTextArea > div > div > textarea:focus,
.stSelectbox > div > div > div:focus-within,
.stMultiSelect > div > div > div:focus-within {
    border-color: var(--color-accent-main) !important;
    box-shadow: 0 0 0 6px rgba(111, 66, 193, 0.25); /* Broader, stronger glow */
    outline: none !important;
    transform: scale(1.008); /* Slightest zoom */
}

/* Labels for inputs */
.stTextInput label,
.stTextArea label,
.stSelectbox label,
.stMultiSelect label,
.stSlider label,
.stRadio label,
.stCheckbox label {
    color: var(--color-text-primary-light) !important;
    font-weight: 600;
    margin-bottom: 0.9rem;
    display: block;
    font-size: 1.15em;
    letter-spacing: 0.02em;
}

body.dark-mode .stTextInput label,
body.dark-mode .stTextArea label,
body.dark-mode .stSelectbox label,
body.dark-mode .stMultiSelect label,
body.dark-mode .stSlider label,
body.dark-mode .stRadio label,
body.dark-mode .stCheckbox label {
    color: var(--color-text-primary-dark) !important;
}

/* Main Content Buttons */
.stButton > button {
    background: linear-gradient(45deg, var(--color-accent-gradient-start), var(--color-accent-gradient-end));
    color: white;
    border: none;
    border-radius: 1.25rem;
    padding: 1.2rem 2.5rem;
    font-weight: 700;
    letter-spacing: 0.05em;
    transition: all var(--transition-duration) var(--transition-ease);
    box-shadow: var(--shadow-deep-1);
    cursor: pointer;
    overflow: hidden;
    position: relative;
    z-index: 1;
    transform: translateZ(0);
}

.stButton > button:active {
    transform: translateY(3px) scale(0.97); /* Deeper press effect */
    box-shadow: var(--shadow-inset-light); /* Inner shadow on press */
}

.stButton > button::before { /* Inner light reflection / shine */
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0.2) 0%, transparent 70%);
    opacity: 0;
    border-radius: 50%;
    transition: opacity 0.4s ease-out, transform 0.4s ease-out;
    transform: scale(0.1);
    z-index: -1;
}

.stButton > button:hover::before {
    opacity: 1;
    transform: scale(1);
}

.stButton > button:hover {
    background: linear-gradient(45deg, var(--color-accent-dark), var(--color-accent-main));
    transform: translateY(-10px) scale(1.06); /* Aggressive lift and scale */
    box-shadow: var(--shadow-deep-2); /* Strongest shadow */
    filter: brightness(1.1) drop-shadow(0 0 10px rgba(111, 66, 193, 0.5)); /* Subtle glow */
}

body.dark-mode .stButton > button {
    background: linear-gradient(45deg, var(--color-accent-gradient-start), var(--color-accent-gradient-end));
    box-shadow: var(--shadow-deep-1);
}
body.dark-mode .stButton > button:hover {
    background: linear-gradient(45deg, var(--color-accent-dark), var(--color-accent-main));
    box-shadow: var(--shadow-deep-2);
    filter: brightness(1.1) drop-shadow(0 0 10px rgba(111, 66, 193, 0.8));
}


/* Expander (Accordion) Styling (Enhanced Glassmorphism) */
.streamlit-expanderHeader {
    background: var(--glass-bg-light);
    backdrop-filter: blur(calc(var(--glass-blur) / 1.5)); /* Less blur for header, but still significant */
    -webkit-backdrop-filter: blur(calc(var(--glass-blur) / 1.5));
    color: var(--color-text-primary-light);
    border-radius: 1.25rem;
    padding: 1.2rem 1.8rem;
    font-weight: 600;
    border: 1px solid var(--glass-border-light);
    box-shadow: var(--shadow-deep-1);
    transition: all var(--transition-duration) var(--transition-ease);
    cursor: pointer;
    margin-bottom: 0.8rem;
    position: relative;
    overflow: hidden;
}

body.dark-mode .streamlit-expanderHeader {
    background: var(--glass-bg-dark);
    border: 1px solid var(--glass-border-dark);
    box-shadow: var(--shadow-deep-1);
    color: var(--color-text-primary-dark);
}

.streamlit-expanderHeader::after { /* Animated accent line */
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 0;
    height: 3px;
    background: linear-gradient(90deg, var(--color-accent-light), var(--color-accent-main));
    transition: width var(--transition-duration) var(--transition-ease);
}

.streamlit-expanderHeader:hover::after {
    width: 100%;
}

.streamlit-expanderHeader:hover {
    background: rgba(111, 66, 193, 0.15); /* Hint of accent color */
    transform: translateY(-6px);
    box-shadow: var(--shadow-deep-2);
    border-color: var(--color-accent-main);
    filter: brightness(1.08);
}

body.dark-mode .streamlit-expanderHeader:hover {
    background: rgba(111, 66, 193, 0.2);
    border-color: var(--color-accent-light);
}

.streamlit-expanderContent {
    background-color: var(--color-bg-secondary-light);
    color: var(--color-text-primary-light);
    border: 1px solid var(--color-border-light);
    border-top: none;
    border-bottom-left-radius: 1.25rem;
    border-bottom-right-radius: 1.25rem;
    padding: 2.5rem;
    margin-top: -0.8rem;
    box-shadow: var(--shadow-deep-1);
    animation: fadeIn 0.7s var(--transition-ease) forwards;
    transform-origin: top; /* Animate from top */
    transform: scaleY(0); /* Start hidden for elegant reveal */
    opacity: 0;
}

/* Specific to when the content is actually expanded by Streamlit */
/* This requires a bit of an assumption that Streamlit adds a class or makes it visible */
/* Streamlit's default behavior makes it display: block, which will trigger animation */
.streamlit-expanderContent[style*="display: block"] {
    animation: expandIn 0.7s var(--transition-ease) forwards;
}

@keyframes expandIn {
    from { opacity: 0; transform: scaleY(0) translateY(-20px); }
    to { opacity: 1; transform: scaleY(1) translateY(0); }
}

body.dark-mode .streamlit-expanderContent {
    background-color: var(--color-bg-secondary-dark);
    color: var(--color-text-primary-dark);
    border: 1px solid var(--color-border-dark);
    box-shadow: var(--shadow-deep-1);
}

/* Info/Success/Warning/Error boxes (Alerts) */
.stAlert {
    border-radius: 1.25rem;
    padding: 1.8rem 2.5rem;
    margin-bottom: 2.5rem;
    font-weight: 500;
    box-shadow: var(--shadow-deep-1);
    transition: all var(--transition-duration) var(--transition-ease);
    border-left: 10px solid; /* Very strong accent border */
    position: relative;
    overflow: hidden;
    transform: translateZ(0);
}

.stAlert::before { /* Subtle background swipe effect on hover */
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: rgba(255, 255, 255, 0.05); /* Very light overlay */
    transition: transform 0.6s ease-out;
}

.stAlert:hover::before {
    transform: translateX(0);
}

.stAlert:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-deep-2);
}

.stAlert.stInfo { background-color: #e3f2fd; color: #1565c0; border-color: #64b5f6; }
.stAlert.stSuccess { background-color: #e8f5e9; color: #2e7d32; border-color: #81c784; }
.stAlert.stWarning { background-color: #fffde7; color: #ef6c00; border-color: #ffb300; }
.stAlert.stError { background-color: #ffebee; color: #c62828; border-color: #ef9a9a; }

body.dark-mode .stAlert.stInfo { background-color: #0d47a1; color: #90caf9; border-color: #42a5f5; }
body.dark-mode .stAlert.stSuccess { background-color: #1b5e20; color: #a5d6a7; border-color: #81c784; }
body.dark-mode .stAlert.stWarning { background-color: #ff6f00; color: #ffeb3b; border-color: #ffa726; }
body.dark-mode .stAlert.stError { background-color: #b71c1c; color: #ef9a9a; border-color: #e57373; }

.stAlert > div > div > div > div {
    color: inherit;
}

/* Dataframe styling */
.stDataFrame {
    border-radius: 1rem;
    overflow: hidden;
    box-shadow: var(--shadow-deep-1);
    border: 1px solid var(--color-border-light);
    margin-top: 2.5rem;
    margin-bottom: 2.5rem;
    transition: all var(--transition-duration) var(--transition-ease);
}
body.dark-mode .stDataFrame {
    box-shadow: var(--shadow-deep-1);
    border: 1px solid var(--color-border-dark);
}

/* Metric boxes (Enhanced Glassmorphism) */
.stMetric {
    background: var(--glass-bg-light);
    backdrop-filter: blur(var(--glass-blur));
    -webkit-backdrop-filter: blur(var(--glass-blur));
    border-radius: 1.25rem;
    padding: 2.2rem;
    border: 1px solid var(--glass-border-light);
    box-shadow: var(--shadow-deep-2); /* Strong initial shadow */
    transition: all var(--transition-duration) var(--transition-ease);
    overflow: hidden;
    position: relative;
    z-index: 1;
    transform: translateZ(0);
}

body.dark-mode .stMetric {
    background: var(--glass-bg-dark);
    border: 1px solid var(--glass-border-dark);
    box-shadow: var(--shadow-deep-2);
}

.stMetric::before { /* Top left subtle light source */
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(circle at top left, rgba(255,255,255,0.1), transparent 50%);
    opacity: 0;
    transition: opacity var(--transition-duration) var(--transition-ease);
    z-index: -1;
}
body.dark-mode .stMetric::before {
     background: radial-gradient(circle at top left, rgba(255,255,255,0.05), transparent 50%);
}

.stMetric:hover::before {
    opacity: 1;
}

.stMetric:hover {
    transform: translateY(-10px) scale(1.02); /* Very significant lift */
    box-shadow: 0 15px 30px rgba(0,0,0,0.25), 0 8px 15px rgba(0,0,0,0.15); /* Even deeper shadow on hover */
    border-color: var(--color-accent-main); /* Accent border on hover */
    filter: brightness(1.08) drop-shadow(0 0 8px rgba(111, 66, 193, 0.4)); /* Subtle outer glow */
}

body.dark-mode .stMetric:hover {
    box-shadow: 0 15px 30px rgba(0,0,0,0.6), 0 8px 15px rgba(0,0,0,0.35);
    border-color: var(--color-accent-light);
    filter: brightness(1.08) drop-shadow(0 0 8px rgba(111, 66, 193, 0.8));
}

/* Radio buttons and checkboxes */
.stRadio div[role="radiogroup"] label, .stCheckbox label {
    padding: 1rem 0;
    color: var(--color-text-primary-light);
    font-weight: 500;
    transition: color var(--transition-duration) var(--transition-ease);
    cursor: pointer;
}
body.dark-mode .stRadio div[role="radiogroup"] label, body.dark-mode .stCheckbox label {
    color: var(--color-text-primary-dark);
}

/* Custom progress bar */
.stProgress > div > div {
    background-color: var(--color-border-light) !important;
    height: 12px !important;
    border-radius: 6px !important;
    overflow: hidden;
    box-shadow: var(--shadow-inset-light);
}
body.dark-mode .stProgress > div > div {
    background-color: var(--color-border-dark) !important;
    box-shadow: var(--shadow-inset-dark);
}

.stProgress > div > div > div {
    background: linear-gradient(90deg, var(--color-accent-light), var(--color-accent-main), var(--color-accent-dark)) !important;
    animation: progressFill 2.5s infinite ease-in-out; /* Slower, smoother fill */
    border-radius: 6px !important;
    background-size: 200% 100%; /* For the animated gradient */
}

@keyframes progressFill {
    0% { background-position: -100% 0; }
    100% { background-position: 100% 0; }
}

/* Custom Loader/Spinner (Pulsating, larger, thicker) */
.stSpinner > div > div {
    border-top-color: var(--color-accent-main) !important;
    border-left-color: var(--color-accent-main) !important;
    animation: spin 1s linear infinite, pulseSpinner 2s ease-in-out infinite alternate;
    width: 80px !important; /* Even larger spinner */
    height: 80px !important;
    border-width: 8px !important; /* Even thicker spinner */
}

@keyframes pulseSpinner {
    0% { transform: scale(0.9); opacity: 0.8; border-color: var(--color-accent-main) !important; }
    50% { transform: scale(1.05); opacity: 1; border-color: var(--color-accent-light) !important;}
    100% { transform: scale(0.9); opacity: 0.8; border-color: var(--color-accent-main) !important;}
}

/* --- Rules to Hide Streamlit Elements (No Change) --- */

header { visibility: hidden; height: 0px; padding: 0px; }
.stApp header { visibility: hidden; height: 0px; padding: 0px; }
.css-1jc7ptx, .e1ewe7hr3, .e1ewe7hr1, .css-1dp5vir { visibility: hidden; display: none; }
footer { visibility: hidden; height: 0px; padding: 0px; }
.stApp footer { visibility: hidden; height: 0px; padding: 0px; }
.main .block-container { padding-top: 2.5rem; }
